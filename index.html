<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü¶† ProtoPet - Virtual Pet Evolution</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --neon-cyan: #00ffff;
            --neon-pink: #ff00ff;
            --neon-green: #00ff88;
            --neon-yellow: #ffff00;
            --neon-orange: #ff6600;
            --neon-purple: #9d00ff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: all 0.3s ease;
            overflow-x: hidden;
        }

        body.dark-mode {
            background: linear-gradient(135deg, #0a0e27 0%, #1a1a2e 100%);
            color: #ffffff;
        }

        body.light-mode {
            background: linear-gradient(135deg, #f0f4ff 0%, #e0e8ff 100%);
            color: #1a1a2e;
        }

        /* Glass Panel Effect */
        .glass-panel {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        body.light-mode .glass-panel {
            background: rgba(255, 255, 255, 0.6);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        /* Neon Effects */
        .neon-text {
            text-shadow: 0 0 10px currentColor, 0 0 20px currentColor;
        }

        .neon-border {
            border: 2px solid var(--neon-cyan);
            box-shadow: 0 0 10px var(--neon-cyan), inset 0 0 10px rgba(0, 255, 255, 0.2);
        }

        /* Pet Canvas Container */
        #petCanvas {
            width: 100%;
            max-width: 400px;
            height: 400px;
            margin: 0 auto;
            display: block;
            border-radius: 20px;
            cursor: pointer;
            touch-action: none;
        }

        /* Stat Bars */
        .stat-bar {
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            background: rgba(0, 0, 0, 0.2);
        }

        .stat-fill {
            height: 100%;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            100% { left: 100%; }
        }

        /* Buttons */
        .btn-neon {
            position: relative;
            padding: 12px 24px;
            border: 2px solid;
            border-radius: 15px;
            background: transparent;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .btn-neon:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px currentColor;
        }

        .btn-neon:active {
            transform: translateY(0);
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 9999;
            padding: 15px 30px;
            border-radius: 15px;
            font-weight: 600;
            animation: slideDown 0.5s ease, slideUp 0.5s ease 2.5s;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        @keyframes slideDown {
            from { top: -100px; opacity: 0; }
            to { top: 20px; opacity: 1; }
        }

        @keyframes slideUp {
            from { top: 20px; opacity: 1; }
            to { top: -100px; opacity: 0; }
        }

        /* Modal */
        .modal-game {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }

        .modal-game.active {
            display: flex;
        }

        .game-canvas {
            background: #1a1a2e;
            border-radius: 15px;
            border: 3px solid var(--neon-cyan);
            box-shadow: 0 0 30px var(--neon-cyan);
        }

        /* Evolution Badge */
        .evolution-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            background: linear-gradient(135deg, var(--neon-cyan), var(--neon-purple));
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.3);
        }

        /* VirusDex Card */
        .virusdex-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .virusdex-card:hover {
            transform: scale(1.05);
        }

        .virusdex-card.locked {
            filter: grayscale(100%) brightness(0.5);
        }

        /* Personality Badge */
        .personality-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 10px 0;
            z-index: 1000;
        }

        .nav-btn {
            background: transparent;
            border: none;
            color: inherit;
            font-size: 1.5rem;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-btn:hover, .nav-btn.active {
            color: var(--neon-cyan);
            transform: scale(1.1);
        }

        .nav-btn.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 3px;
            background: var(--neon-cyan);
            box-shadow: 0 0 10px var(--neon-cyan);
        }

        /* Shop Items */
        .shop-item {
            transition: all 0.3s ease;
            cursor: pointer;
            border-radius: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
        }

        .shop-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 255, 255, 0.3);
        }

        /* Animations */
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes glow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.3); }
        }

        .pulse { animation: pulse 2s infinite; }
        .float { animation: float 3s ease-in-out infinite; }
        .glow { animation: glow 2s ease-in-out infinite; }

        /* Hide scrollbar */
        .page-content {
            min-height: calc(100vh - 200px);
            padding-bottom: 80px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--neon-cyan) transparent;
        }

        .page-content::-webkit-scrollbar {
            width: 6px;
        }

        .page-content::-webkit-scrollbar-track {
            background: transparent;
        }

        .page-content::-webkit-scrollbar-thumb {
            background: var(--neon-cyan);
            border-radius: 10px;
        }

        /* Color Selector */
        .color-selector {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }

        .color-selector:hover {
            transform: scale(1.2);
            border-color: white;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1a2e 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 99999;
            transition: opacity 0.5s ease;
        }

        .loading-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loader {
            width: 80px;
            height: 80px;
            border: 5px solid rgba(0, 255, 255, 0.2);
            border-top-color: var(--neon-cyan);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="dark-mode">
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="text-center">
            <div class="loader mx-auto mb-3"></div>
            <h4 class="text-white neon-text">Loading ProtoPet...</h4>
        </div>
    </div>

    <!-- Header -->
    <nav class="navbar glass-panel sticky-top">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1 neon-text" style="color: var(--neon-cyan);">
                ü¶† ProtoPet
            </span>
            <div class="d-flex align-items-center gap-3">
                <span class="badge evolution-badge" id="bioPointsDisplay">‚≠ê 100 BP</span>
                <button class="btn btn-sm btn-outline-light" id="themeToggle">
                    <i class="bi bi-moon-fill"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="page-content" id="mainContent">
        <!-- Home Page -->
        <div class="page" id="homePage">
            <div class="container py-4">
                <div class="text-center mb-4">
                    <h2 class="neon-text" id="petName">Virux</h2>
                    <p class="text-muted mb-2" id="petSpecies">Proto Virus</p>
                    <div class="d-flex justify-content-center gap-2 flex-wrap">
                        <span class="badge bg-primary">Lv. <span id="petLevel">1</span></span>
                        <span class="personality-badge" id="personalityBadge">
                            <i class="bi bi-star-fill"></i> Curious
                        </span>
                        <span class="badge" style="background: var(--neon-purple);" id="habitatBadge">
                            üè† Petri Glass
                        </span>
                    </div>
                </div>

                <!-- Pet Display -->
                <div class="glass-panel p-3 mb-4 neon-border">
                    <canvas id="petCanvas" width="400" height="400"></canvas>
                    <div class="text-center mt-3">
                        <small class="text-muted">Tap untuk berinteraksi ‚Ä¢ Drag untuk memindahkan</small>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="row g-2 mb-4">
                    <div class="col-6">
                        <button class="btn btn-neon w-100" style="color: var(--neon-green); border-color: var(--neon-green);" onclick="feedPet()">
                            <i class="bi bi-droplet-fill"></i> Feed
                        </button>
                    </div>
                    <div class="col-6">
                        <button class="btn btn-neon w-100" style="color: var(--neon-cyan); border-color: var(--neon-cyan);" onclick="cleanPet()">
                            <i class="bi bi-sparkles"></i> Clean
                        </button>
                    </div>
                    <div class="col-6">
                        <button class="btn btn-neon w-100" style="color: var(--neon-pink); border-color: var(--neon-pink);" onclick="stabilizeMood()">
                            <i class="bi bi-heart-fill"></i> Stabilize
                        </button>
                    </div>
                    <div class="col-6">
                        <button class="btn btn-neon w-100" style="color: var(--neon-yellow); border-color: var(--neon-yellow);" onclick="openMiniGame()">
                            <i class="bi bi-controller"></i> Play
                        </button>
                    </div>
                </div>

                <!-- Stats -->
                <div class="glass-panel p-3">
                    <h5 class="mb-3 neon-text" style="color: var(--neon-cyan);">
                        <i class="bi bi-graph-up"></i> Status
                    </h5>
                    
                    <div class="mb-3">
                        <div class="d-flex justify-content-between mb-1">
                            <small><i class="bi bi-lightning-fill text-warning"></i> Energy</small>
                            <small><span id="energyStat">80</span>%</small>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-fill" id="energyBar" style="width: 80%; background: linear-gradient(90deg, #ffd700, #ffa500);"></div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <div class="d-flex justify-content-between mb-1">
                            <small><i class="bi bi-droplet-fill text-success"></i> Hunger</small>
                            <small><span id="hungerStat">60</span>%</small>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-fill" id="hungerBar" style="width: 60%; background: linear-gradient(90deg, #00ff88, #00cc66);"></div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <div class="d-flex justify-content-between mb-1">
                            <small><i class="bi bi-heart-fill text-danger"></i> Mood</small>
                            <small><span id="moodStat">75</span>%</small>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-fill" id="moodBar" style="width: 75%; background: linear-gradient(90deg, #ff0066, #cc0055);"></div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <div class="d-flex justify-content-between mb-1">
                            <small><i class="bi bi-sparkles text-info"></i> Cleanliness</small>
                            <small><span id="cleanStat">80</span>%</small>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-fill" id="cleanBar" style="width: 80%; background: linear-gradient(90deg, #00ffff, #00cccc);"></div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <div class="d-flex justify-content-between mb-1">
                            <small><i class="bi bi-star-fill text-primary"></i> Affinity</small>
                            <small><span id="affinityStat">50</span>%</small>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-fill" id="affinityBar" style="width: 50%; background: linear-gradient(90deg, #9d00ff, #7700cc);"></div>
                        </div>
                    </div>

                    <div>
                        <div class="d-flex justify-content-between mb-1">
                            <small><i class="bi bi-moisture text-secondary"></i> Mutation Rate</small>
                            <small><span id="mutationStat">20</span>%</small>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-fill" id="mutationBar" style="width: 20%; background: linear-gradient(90deg, #ff00ff, #cc00cc);"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- VirusDex Page -->
        <div class="page" id="virusDexPage" style="display: none;">
            <div class="container py-4">
                <h2 class="text-center mb-4 neon-text" style="color: var(--neon-cyan);">
                    <i class="bi bi-book-fill"></i> VirusDex
                </h2>
                <p class="text-center text-muted mb-4">Koleksi Evolusi: <span id="collectionCount">1</span>/11</p>
                
                <div class="row g-3" id="virusDexContainer">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Shop Page -->
        <div class="page" id="shopPage" style="display: none;">
            <div class="container py-4">
                <h2 class="text-center mb-4 neon-text" style="color: var(--neon-cyan);">
                    <i class="bi bi-cart-fill"></i> BioShop
                </h2>
                
                <div class="glass-panel p-3 mb-4">
                    <h5 class="mb-3"><i class="bi bi-palette-fill"></i> Color Skins</h5>
                    <div class="d-flex gap-3 flex-wrap justify-content-center">
                        <div class="color-selector" style="background: #00ff88;" onclick="buyColor('#00ff88')"></div>
                        <div class="color-selector" style="background: #ff00ff;" onclick="buyColor('#ff00ff')"></div>
                        <div class="color-selector" style="background: #00ffff;" onclick="buyColor('#00ffff')"></div>
                        <div class="color-selector" style="background: #ffff00;" onclick="buyColor('#ffff00')"></div>
                        <div class="color-selector" style="background: #ff6600;" onclick="buyColor('#ff6600')"></div>
                        <div class="color-selector" style="background: #ff0066;" onclick="buyColor('#ff0066')"></div>
                        <div class="color-selector" style="background: #9d00ff;" onclick="buyColor('#9d00ff')"></div>
                        <div class="color-selector" style="background: #00ff00;" onclick="buyColor('#00ff00')"></div>
                    </div>
                    <p class="text-center text-muted mt-2 mb-0">50 BioPoints each</p>
                </div>

                <div class="glass-panel p-3 mb-4">
                    <h5 class="mb-3"><i class="bi bi-house-fill"></i> Habitat Upgrade</h5>
                    <div class="shop-item mb-2" onclick="buyHabitat('Micro Lab', 200)">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="mb-0">üî¨ Micro Lab</h6>
                                <small class="text-muted">Enhanced growth environment</small>
                            </div>
                            <span class="badge bg-warning">200 BP</span>
                        </div>
                    </div>
                    <div class="shop-item mb-2" onclick="buyHabitat('BioChamber', 500)">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="mb-0">üß™ BioChamber</h6>
                                <small class="text-muted">Advanced mutation chamber</small>
                            </div>
                            <span class="badge bg-warning">500 BP</span>
                        </div>
                    </div>
                    <div class="shop-item" onclick="buyHabitat('Quantum Habitat', 1000)">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="mb-0">‚ö° Quantum Habitat</h6>
                                <small class="text-muted">Ultimate evolution space</small>
                            </div>
                            <span class="badge bg-warning">1000 BP</span>
                        </div>
                    </div>
                </div>

                <div class="glass-panel p-3">
                    <h5 class="mb-3"><i class="bi bi-lightning-charge-fill"></i> DNA Boosters</h5>
                    <div class="shop-item mb-2" onclick="buyBooster('energy', 30)">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="mb-0">‚ö° Energy Boost</h6>
                                <small class="text-muted">Restore 50% energy instantly</small>
                            </div>
                            <span class="badge bg-warning">30 BP</span>
                        </div>
                    </div>
                    <div class="shop-item" onclick="buyBooster('mutation', 100)">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="mb-0">üß¨ Mutation Accelerator</h6>
                                <small class="text-muted">Trigger random mutation</small>
                            </div>
                            <span class="badge bg-warning">100 BP</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Page -->
        <div class="page" id="settingsPage" style="display: none;">
            <div class="container py-4">
                <h2 class="text-center mb-4 neon-text" style="color: var(--neon-cyan);">
                    <i class="bi bi-gear-fill"></i> Settings
                </h2>
                
                <div class="glass-panel p-3 mb-3">
                    <h5 class="mb-3">Pet Information</h5>
                    <div class="mb-3">
                        <label class="form-label">Pet Name</label>
                        <input type="text" class="form-control" id="petNameInput" value="Virux">
                    </div>
                    <button class="btn btn-primary w-100" onclick="updatePetName()">
                        <i class="bi bi-check-circle"></i> Save Name
                    </button>
                </div>

                <div class="glass-panel p-3 mb-3">
                    <h5 class="mb-3">Game Data</h5>
                    <button class="btn btn-success w-100 mb-2" onclick="saveToCloud()">
                        <i class="bi bi-cloud-upload-fill"></i> Save to Cloud
                    </button>
                    <button class="btn btn-warning w-100 mb-2" onclick="loadFromCloud()">
                        <i class="bi bi-cloud-download-fill"></i> Load from Cloud
                    </button>
                    <button class="btn btn-danger w-100" onclick="resetGame()">
                        <i class="bi bi-arrow-clockwise"></i> Reset Game
                    </button>
                </div>

                <div class="glass-panel p-3">
                    <h5 class="mb-3">About</h5>
                    <p class="mb-2"><strong>ProtoPet</strong> v1.0</p>
                    <p class="text-muted mb-0">A virtual pet evolution game where your care determines your pet's evolution path!</p>
                    <hr>
                    <p class="text-muted mb-0 small">
                        ¬© 2024 ProtoPet. Made with üíö for pet lovers.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav glass-panel">
        <div class="container">
            <div class="d-flex justify-content-around">
                <button class="nav-btn active" onclick="switchPage('homePage', this)">
                    <i class="bi bi-house-fill"></i>
                </button>
                <button class="nav-btn" onclick="switchPage('virusDexPage', this)">
                    <i class="bi bi-book-fill"></i>
                </button>
                <button class="nav-btn" onclick="switchPage('shopPage', this)">
                    <i class="bi bi-cart-fill"></i>
                </button>
                <button class="nav-btn" onclick="switchPage('settingsPage', this)">
                    <i class="bi bi-gear-fill"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Mini Game Modal -->
    <div class="modal-game" id="miniGameModal">
        <div class="text-center">
            <div class="mb-3">
                <h3 class="text-white neon-text">üéÆ BioRunner</h3>
                <p class="text-muted">Hindari antibodi untuk bertahan!</p>
            </div>
            <canvas id="gameCanvas" class="game-canvas" width="350" height="500"></canvas>
            <div class="mt-3">
                <h4 class="text-white">Score: <span id="gameScore">0</span></h4>
                <button class="btn btn-lg btn-primary" id="gameJumpBtn">JUMP</button>
                <button class="btn btn-lg btn-danger ms-2" onclick="closeMiniGame()">EXIT</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Game State
        let gameState = {
            pet: {
                name: 'Virux',
                species: 'Proto Virus',
                evolution: 'egg',
                level: 1,
                energy: 80,
                stability: 70,
                mutationRate: 20,
                affinity: 50,
                hunger: 60,
                mood: 75,
                cleanliness: 80,
                personality: 'Curious',
                color: '#00ff88',
                bioPoints: 100,
                totalXP: 0,
                habitat: 'Petri Glass',
                lastFed: Date.now(),
                lastCleaned: Date.now(),
                x: 200,
                y: 200
            },
            virusDex: ['egg'],
            isDarkMode: true
        };

        // Evolution Data
        const evolutions = {
            egg: { name: 'Egg', emoji: 'ü•ö', next: ['baby'] },
            baby: { name: 'Baby Virus', emoji: 'ü¶†', next: ['friendly', 'chaotic', 'dark'] },
            friendly: { name: 'Glow Buddy', emoji: '‚ú®', next: ['angel', 'helper'] },
            chaotic: { name: 'Wild Spark', emoji: '‚ö°', next: ['cosmic', 'glitch'] },
            dark: { name: 'Shadow Virus', emoji: 'üëª', next: ['demon', 'phantom'] },
            angel: { name: 'Celestial Protector', emoji: 'üëº', next: [] },
            helper: { name: 'Bio Guardian', emoji: 'üõ°Ô∏è', next: [] },
            cosmic: { name: 'Star Drifter', emoji: '
